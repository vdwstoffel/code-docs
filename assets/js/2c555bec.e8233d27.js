"use strict";(self.webpackChunkcode_docs=self.webpackChunkcode_docs||[]).push([[9830],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>g});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=a.createContext({}),i=function(e){var t=a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=i(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,s=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=i(r),m=n,g=d["".concat(u,".").concat(m)]||d[m]||c[m]||s;return r?a.createElement(g,l(l({ref:t},p),{},{components:r})):a.createElement(g,l({ref:t},p))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=r.length,l=new Array(s);l[0]=m;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o[d]="string"==typeof e?e:n,l[1]=o;for(var i=2;i<s;i++)l[i]=r[i];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5162:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(7294),n=r(6010);const s={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:r,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,n.Z)(s.tabItem,l),hidden:r},t)}},4866:(e,t,r)=>{r.d(t,{Z:()=>N});var a=r(7462),n=r(7294),s=r(6010),l=r(2466),o=r(6550),u=r(1980),i=r(7392),p=r(12);function d(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:r,attributes:a,default:n}}=e;return{value:t,label:r,attributes:a,default:n}}))}function c(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=t??d(r);return function(e){const t=(0,i.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function m(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:r}=e;const a=(0,o.k6)(),s=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,u._X)(s),(0,n.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function h(e){const{defaultValue:t,queryString:r=!1,groupId:a}=e,s=c(e),[l,o]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s}))),[u,i]=g({queryString:r,groupId:a}),[d,h]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,p.Nk)(r);return[a,(0,n.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:a}),f=(()=>{const e=u??d;return m({value:e,tabValues:s})?e:null})();(0,n.useLayoutEffect)((()=>{f&&o(f)}),[f]);return{selectedValue:l,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),i(e),h(e)}),[i,h,s]),tabValues:s}}var f=r(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:t,block:r,selectedValue:o,selectValue:u,tabValues:i}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.o5)(),c=e=>{const t=e.currentTarget,r=p.indexOf(t),a=i[r].value;a!==o&&(d(t),u(a))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=p.indexOf(e.currentTarget)+1;t=p[r]??p[0];break}case"ArrowLeft":{const r=p.indexOf(e.currentTarget)-1;t=p[r]??p[p.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":r},t)},i.map((e=>{let{value:t,label:r,attributes:l}=e;return n.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:c},l,{className:(0,s.Z)("tabs__item",b.tabItem,l?.className,{"tabs__item--active":o===t})}),r??t)})))}function v(e){let{lazy:t,children:r,selectedValue:a}=e;const s=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===a));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},s.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function y(e){const t=h(e);return n.createElement("div",{className:(0,s.Z)("tabs-container",b.tabList)},n.createElement(k,(0,a.Z)({},e,t)),n.createElement(v,(0,a.Z)({},e,t)))}function N(e){const t=(0,f.Z)();return n.createElement(y,(0,a.Z)({key:String(t)},e))}},5500:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>u,default:()=>g,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=r(7462),n=(r(7294),r(3905)),s=r(4866),l=r(5162);const o={sidebar_label:"Express",sidebar_position:2},u="Express",i={unversionedId:"javascript/express/express",id:"javascript/express/express",title:"Express",description:"Getting Started",source:"@site/docs/javascript/express/express.md",sourceDirName:"javascript/express",slug:"/javascript/express/",permalink:"/javascript/express/",draft:!1,editUrl:"https://github.com/vdwstoffel/code_docs/blob/main/docs/javascript/express/express.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Express",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Node",permalink:"/javascript/node"},next:{title:"Templates",permalink:"/javascript/express/templates"}},p={},d=[{value:"Getting Started",id:"getting-started",level:2},{value:"Error route",id:"error-route",level:2},{value:"Route methods",id:"route-methods",level:2},{value:"Route Parameters",id:"route-parameters",level:2},{value:"Query Params",id:"query-params",level:2},{value:"Remove fields from query",id:"remove-fields-from-query",level:3},{value:"Response Methods",id:"response-methods",level:2},{value:"app.route()",id:"approute",level:2},{value:"Controllers",id:"controllers",level:2},{value:"Middleware",id:"middleware",level:2},{value:"Run on each request",id:"run-on-each-request",level:3},{value:"Middleware on specific routes",id:"middleware-on-specific-routes",level:3},{value:"Run on particular requests",id:"run-on-particular-requests",level:3},{value:"Edit req method",id:"edit-req-method",level:3},{value:"Accessing parameters",id:"accessing-parameters",level:3},{value:"Chaining middleware",id:"chaining-middleware",level:3}],c={toc:d},m="wrapper";function g(e){let{components:t,...r}=e;return(0,n.kt)(m,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"express"},"Express"),(0,n.kt)("h2",{id:"getting-started"},"Getting Started"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"npm i express\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'const express = require("express");\nconst app = express();\n\n// respond with "hello world" when a GET request is made to the homepage\napp.get("/", (req, res) => {\n  res.send("hello world");\n});\n\n// Start the server\nconst port = process.env.PORT || 3000;\napp.listen(port, () => {\n  console.log(`http://localhost:${port}`);\n});\n')),(0,n.kt)("h2",{id:"error-route"},"Error route"),(0,n.kt)("p",null,"Add this as the last route. When no routes match this route will run"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'app.use((req, res) => {\n  res.status(404).json({ status: "failure", message: "Failure Message" });\n});\n')),(0,n.kt)("h2",{id:"route-methods"},"Route methods"),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Get",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/api", (req, res) => {\n  res.status(200).json({ status: "success", data: { info: mydata } });\n});\n'))),(0,n.kt)(l.Z,{value:"Post",mdxType:"TabItem"},(0,n.kt)("p",null,"When receiving ",(0,n.kt)("strong",{parentName:"p"},"json")," data"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'app.use(express.json());\n\napp.post("/api", (req, res) => {\n  res.status(201).json({ status: "success", data: { info: mydata } });\n});\n')),(0,n.kt)("p",null,"When receiving ",(0,n.kt)("strong",{parentName:"p"},"html form")," data"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'app.use(express.urlencoded({ extended: true }));\n\napp.post("/api", (req, res) => {\n  res.status(201).json({ status: "success", data: { info: mydata } });\n});\n'))),(0,n.kt)(l.Z,{value:"Put/Patch",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'app.patch("/api/tours/:id", (req, res) => {\n  const id = req.params.id;\n  // do update logic\n  res.status(200).json({ status: "success", data: { tours: selectedTour } });\n});\n'))),(0,n.kt)(l.Z,{value:"Delete",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'app.delete("/api/tours/:id", (req, res) => {\n  const id = req.params.id;\n  // delete logic\n  res.status(202).json({ status: "success", data: null });\n});\n')))),(0,n.kt)("h2",{id:"route-parameters"},"Route Parameters"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"mysite.com/api/tours/5")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'/app.get("/api/tours/:tourId", (req, res) => {\n    const id = req.params.tourId // 5\n    res.status(200).json({ status: "success", data: {tours: tourData[id]} })\n})\n')),(0,n.kt)("h2",{id:"query-params"},"Query Params"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"/api/tours?duration=5&difficulty=easy")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"app.get(\"/api/tours\", (req, res) => {\n  console.log(req.query);\n  // { duration: '5', difficulty: 'easy' }\n});\n")),(0,n.kt)("h3",{id:"remove-fields-from-query"},"Remove fields from query"),(0,n.kt)("p",null,"Remove unwanted field from the query params"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'const queryObj = { ...req.query }; // destructure to create new copy\nconst excludeFields = ["page", "sort", "limit", "fields"]; // exclude from the params\nexcludeFields.forEach((el) => delete queryObj[el]); // delete from the object\nconsole.log(queryObj);\n')),(0,n.kt)("h2",{id:"response-methods"},"Response Methods"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Method"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"res.status()")),(0,n.kt)("td",{parentName:"tr",align:null},"Add the status code in brackets and send it")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"res.json()")),(0,n.kt)("td",{parentName:"tr",align:null},"Send a JSON response.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"res.redirect()")),(0,n.kt)("td",{parentName:"tr",align:null},"Redirect a request.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"res.render()")),(0,n.kt)("td",{parentName:"tr",align:null},"Render a view template.")))),(0,n.kt)("h2",{id:"approute"},"app.route()"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'app\n  .route("/book")\n  .get((req, res) => {\n    res.send("Get a random book");\n  })\n  .post((req, res) => {\n    res.send("Add a book");\n  })\n  .put((req, res) => {\n    res.send("Update the book");\n  });\n')),(0,n.kt)("h2",{id:"controllers"},"Controllers"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="controllers/birds.js"',title:'"controllers/birds.js"'},'const express = require("express");\nconst router = express.Router();\n\n// define the home page route\nrouter.get("/", (req, res) => {\n  res.send("Birds home page");\n});\n// define the about route\nrouter.get("/about", (req, res) => {\n  res.send("About birds");\n});\n\nmodule.exports = router;\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="app.js"',title:'"app.js"'},'const express = require("express");\nconst app = express();\n\nconst birds = require("./controllers/birds");\n// ...\napp.use("/birds", birds);\n\napp.listen(3000);\n')),(0,n.kt)("p",null,"Now go to mysite.com/birds/"),(0,n.kt)("h2",{id:"middleware"},"Middleware"),(0,n.kt)("h3",{id:"run-on-each-request"},"Run on each request"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"Hello Middleware")," will be logged on each request"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'app.use((req, res, next) => {\n  console.log("Hello Middleware");\n  next(); // call next otherwise middleware will not complete\n});\n\napp.get("/", (req, res) => {\n  res.send("Hello World");\n});\n')),(0,n.kt)("h3",{id:"middleware-on-specific-routes"},"Middleware on specific routes"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'app.use("/api", (req, res, next) => {\n  console.log("Api route used");\n  next(); // call next middleware. If no next, the request will hang\n});\n\napp.get("/api", (req, res) => {\n  res.send({ route: "api", date: "Today" });\n});\n')),(0,n.kt)("h3",{id:"run-on-particular-requests"},"Run on particular requests"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},'const protect = (req, res, next) => {\n  console.log("This route is protected");\n  next(); //  call next middleware. If no next, the request will hang\n};\n\napp.get("/secret", protect, (req, res) => {\n  res.send("This is a secret route");\n});\n')),(0,n.kt)("h3",{id:"edit-req-method"},"Edit req method"),(0,n.kt)("p",null,"You can also add a method to the request object"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"app.use((req, res, next) => {\n  req.requestTime = new Date().toISOString();\n  console.log(req.requestTime);\n  next();\n});\n")),(0,n.kt)("h3",{id:"accessing-parameters"},"Accessing parameters"),(0,n.kt)("p",null,"Use ",(0,n.kt)("inlineCode",{parentName:"p"},"app.param()")," to gain access to the passed parameters."),(0,n.kt)("p",null,"In the example below you have ",(0,n.kt)("inlineCode",{parentName:"p"},"/:id")," so param = 5 if path is ",(0,n.kt)("inlineCode",{parentName:"p"},"/5")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'/*\n * Value refers the the passed param (:id)\n */\nconst invalid = (req, res, next, value) => {\n  if (value > 5) {\n    // return otherwise next will run\n    return res.status(500).json({ status: "Error", response: "Invalid Param" });\n  }\n  next();\n};\n\n// assign middleware\napp.param("id", invalid); // check if id is passed as a param\n\napp.get("/:id", (req, res) => {\n  res.status(200).json({\n    status: "success",\n    response: "Good",\n  });\n});\n')),(0,n.kt)("h3",{id:"chaining-middleware"},"Chaining middleware"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/", middlewareOne, middlewareTwo, (req, res) => {\n  // ...\n});\n')))}g.isMDXComponent=!0}}]);